# Documentação da Solução de Agentes em PLN

Este documento descreve a arquitetura e funcionamento da solução avançada de Processamento de Linguagem Natural (PLN) desenvolvida para análise fundamentalista de investimentos.

| Critério | Descrição |
| :--- | :--- |
| **Qual o objetivo geral do agente / RAG / solução avançada em PLN?** | O objetivo é automatizar a **análise fundamentalista** de empresas listadas na B3, focando na estratégia de longo prazo ("Buy & Hold"). O sistema visa identificar **quebras de tese de investimento** e resumir eventos chave, fornecendo três perspectivas distintas para auxiliar na tomada de decisão: uma **Otimista** (Bullish), uma **Pessimista** (Bearish) e uma **Neutra** (Juiz). |
| **Quais as entradas do sistema? Qual parte da base de dados ele irá utilizar?** | **Entradas:** Ticker da ação (ex: `PETR4`), horizonte de tempo (ex: `12` meses) e idioma de saída (Português/Inglês).<br><br>**Base de Dados:** O sistema utiliza um banco MySQL (`investment_news`).<br><br>**Dados Utilizados:** O sistema recupera e consolida o **texto bruto** armazenado na tabela `processamento_texto`, cruzando com a tabela `noticias` para filtrar os artigos relevantes pelo `ticker_id` e pela `data_publicacao` dentro da janela de tempo especificada. |
| **Qual o fluxo “agêntico”? Quais etapas e processamentos? Qual(is) modelo(s) de linguagem serão empregados? Como?** | **Fluxo do Processo:**<br>1. **Coleta de Dados:** Execução de scrapers (InfoMoney e Exame) para capturar notícias recentes e armazená-las no banco de dados.<br>2. **Recuperação e Consolidação:** O `AppController` busca todos os fragmentos de texto relevantes no banco e os unifica em um único contexto.<br>3. **Arquitetura Multi-Agente:** O `MultiAgentAnalysisService` orquestra três chamadas ao LLM:<br>   - *Agente Otimista:* Analisa o texto buscando oportunidades, vantagens competitivas e crescimento.<br>   - *Agente Pessimista:* Analisa o texto buscando riscos, endividamento e ameaças operacionais.<br>   - *Agente Neutro (Juiz):* Recebe as análises dos dois agentes anteriores + o texto bruto das notícias. Ele julga se houve uma "quebra de tese" estrutural (ex: diluição, troca de gestão, fraude) com base em critérios estritos definidos no prompt.<br><br>**Modelo de Linguagem:** Utiliza o **Google Gemini** (modelo `gemini-2.0-flash-lite`) configurado com temperatura 0.7 para equilibrar criatividade e precisão. |
| **Quais as saídas esperadas e metodologias para avaliação dos resultados?** | **Saídas Esperadas:** Um relatório consolidado em Markdown contendo:<br>1. Análise detalhada da Perspectiva Otimista.<br>2. Análise detalhada da Perspectiva Pessimista.<br>3. Análise Fundamentalista (Veredito do Juiz: SIM/NÃO para mudanças estruturais).<br>4. Resumo fatual dos principais eventos.<br><br>**Metodologia de Avaliação:** A avaliação é qualitativa, verificando a capacidade do "Agente Juiz" de distinguir ruído de mercado (ex: queda de 5% na ação) de eventos fundamentais (ex: aumento de capital, fusões, troca de CEO), conforme as instruções de "gatilhos rígidos" (hard triggers) implementadas nos prompts. |